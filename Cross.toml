# Static CLI builds (musl)
[target.x86_64-unknown-linux-musl]
pre-build = [
    "apt-get update && apt-get install -y musl-tools libssl-dev pkg-config"
]

[target.aarch64-unknown-linux-musl]
pre-build = [
    "apt-get update && apt-get install -y musl-tools libssl-dev pkg-config"
]

[build.env]
passthrough = ["OPENSSL_STATIC=1"]

# Dynamic geyser plugin builds (gnu)
[target.x86_64-unknown-linux-gnu]
pre-build = [
    "apt-get update && apt-get install -y libssl-dev libudev-dev pkg-config"
]

[target.aarch64-unknown-linux-gnu]
pre-build = [
    "dpkg --add-architecture arm64",
    "apt-get update && apt-get install -y libssl-dev:arm64 libudev-dev:arm64 pkg-config"
]
