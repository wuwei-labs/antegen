[[{"l":"Welcome"},{"l":"Why was this fork created?","p":["Antegen is a hard fork from Clockwork at commit 44d2038. This was done to continue the development of the protocol in an Open Source environment. The rebranding from Clockwork to Antegen became necessary due to limitations in accessing and updating the crates.io packages and on-chain programs."]},{"l":"Fork Details","p":["Antegen maintains the core protocol design from Clockwork while modernizing the codebase for compatibility with the latest Solana ecosystem dependencies. This includes support for:","Anchor 0.31.0 and above","Solana 2.1.21 (Agave) and above","Latest ecosystem dependencies and standards","Modern development tooling","This open-source development path enables:","Community-driven improvements","Rapid security patches","Continuous dependency updates","Enhanced protocol stability"]},{"l":"Opinionated Changes","p":["Removed Clockwork ThreadV1 program","Removed Clockwork Webhook program","Updated Clockwork ThreadV2 to Antegen ThreadV1"]},{"l":"Alternatives","p":["There's been work on a truly open source version of Clockwork via the Open Clockwork project. Which appears to take the approach of carrying the torch from where the original project left off ensure backwards compatibility.","Antegen is now under active development as its own project. While it shares historical roots with Clockwork, all interfaces and implementations are subject to change as the project evolves to meet its unique objectives."]},{"l":"Deployments","p":["Program","Address","Devnet","Mainnet","Network","AgNet6qmh75bjFULcS9RQijUoWwkCtSiSwXM1K3Ujn6Z","Thread v1","AgThdyi1P5RkVeZD2rQahTvs8HePJoGFFxKtvok5s2J1"]},{"l":"SDKs","p":["Language","Description","Lib","Examples","Anchor","Anchor bindings for Solana programs.","crates.io","Rust","Rust bindings for clients.","Typescript","Typescript bindings for clients and frontends."]},{"l":"Local Development"},{"l":"1. Install Rust"},{"l":"2. Install Solana CLI"},{"l":"3. Install Anchor (avm)"},{"l":"4. Install antegen-cli","p":["If you are on linux, you might need to run this:","Install with cargo:"]},{"l":"5. Anchor Build","p":["https://solana.stackexchange.com/questions/17777/unexpected-cfg-condition-value-solana"]},{"l":"6. Run a localnet node"},{"l":"7. Stream program logs"}],[{"l":"antegen-cli","p":["Command-line interface for Antegen- Solana automation and scheduling."]},{"l":"Installation"},{"l":"From crates.io"},{"l":"From script"},{"l":"From source"},{"l":"Usage"},{"l":"Configuration","p":["The CLI reads Solana configuration from ~/.config/solana/cli/config.yml by default."]},{"l":"Documentation","p":["GitHub"]},{"l":"License","p":["MIT"]}],[{"l":"Thread Program","p":["The Antegen Thread Program is a Solana program that enables scheduled transaction execution through configurable triggers and instruction sequences (fibers). It provides a decentralized automation layer for Solana applications.","Program ID: AgThdyi1P5RkVeZD2rQahTvs8HePJoGFFxKtvok5s2J1"]},{"l":"Key Concepts"},{"l":"Threads","p":["A thread is an on-chain automation unit that executes instruction sequences when trigger conditions are met. Each thread contains:","Authority: The account that owns and controls the thread","ID: Unique identifier (bytes or Pubkey) for the thread","Trigger: Condition that determines when execution should occur","Fibers: Ordered sequence of instructions to execute","State: Current execution index, pause status, nonce info"]},{"l":"Fibers","p":["Fibers are individual instructions within a thread's execution sequence. They are stored as compiled instructions and executed in order:","Index: Position in the execution sequence (0-255)","Compiled Instruction: Serialized instruction data","Execution Tracking: Last executed timestamp and count"]},{"l":"Triggers","p":["Triggers define when a thread should execute. Supported types:","Now: Execute immediately when called","Timestamp: Execute at specific Unix timestamp","Interval: Recurring execution with fixed second intervals","Cron: Schedule-based execution using cron expressions","Account: Execute when specified account data changes","Slot: Execute when blockchain reaches target slot","Epoch: Execute when blockchain reaches target epoch"]},{"l":"Program Instructions"},{"l":"Configuration Management"},{"l":"init_config","p":["Initialize the global thread configuration (admin only)."]},{"l":"update_config","p":["Update global configuration parameters."]},{"l":"Thread Lifecycle"},{"l":"create_thread","p":["Create a new thread with specified trigger and funding."]},{"l":"delete_thread","p":["Close thread account and return lamports to authority."]},{"l":"toggle_thread","p":["Pause or resume thread execution."]},{"l":"update_thread","p":["Modify thread's trigger condition."]},{"l":"withdraw_thread","p":["Withdraw lamports from thread's balance."]},{"l":"Fiber Management"},{"l":"create_fiber","p":["Add instruction to thread's execution sequence."]},{"l":"delete_fiber","p":["Remove instruction from thread's sequence."]},{"l":"Thread Execution"},{"l":"exec_thread","p":["Execute the next fiber in thread's sequence with trigger validation.","Execution Flow:","Validate trigger conditions are met","Advance durable nonce (required for all threads)","Update trigger context for next execution","Execute current fiber instruction via CPI","Advance to next fiber in sequence (wraps around)","Calculate and distribute execution fees"]},{"l":"Fee Economics","p":["The program implements time-based commission decay to incentivize prompt execution:"]},{"l":"Commission Calculation","p":["Base Commission: Configured per-execution fee","Grace Period: Full commission for timely execution","Decay Period: Linear reduction from 100% to 0% over time","Late Penalty: No commission after grace + decay period"]},{"l":"Fee Distribution","p":["Total effective commission is split between:","Executor Fee: Configurable percentage (can be forgone)","Core Team Fee: Protocol development funding","Thread Authority: Retains remainder"]},{"l":"Account Structure"},{"l":"Thread Account"},{"l":"Fiber Account"},{"l":"Configuration Account"},{"l":"PDA Seeds","p":["The program uses deterministic PDAs for account addressing:","Config: [config]","Thread: [thread, authority, thread_id]","Fiber: [thread_fiber, thread_pubkey, fiber_index]"]},{"l":"Error Handling","p":["The program defines comprehensive error types for validation and execution:"]},{"l":"Durable Nonces","p":["All threads must use durable nonces for transaction reliability:","Prevents replay attacks over long time periods","Enables offline transaction preparation","Thread PDA serves as nonce authority","Nonce is advanced before each execution"]},{"l":"Integration Examples"},{"l":"Creating a Simple Recurring Thread"},{"l":"Adding Instruction Fiber","p":["This program provides the foundation for decentralized automation on Solana, enabling applications to schedule reliable transaction execution without centralized infrastructure."]}],[{"l":"antegen Runbooks","p":["Surfpool"]},{"l":"Available Runbooks"},{"l":"deployment","p":["Deploy programs"]},{"l":"Getting Started","p":["This repository is using Surfpool as a part of its development workflow.","Surfpool provides three major upgrades to the Solana development experience:","Surfnet: A local validator that runs on your machine, allowing you fork mainnet on the fly so that you always use the latest chain data when testing your programs.","Runbooks: Bringing the devops best practice of infrastructure as code to Solana, Runbooks allow you to have secure, reproducible, and composable scripts for managing on-chain operations & deployments.","Surfpool Studio: An all-local Web UI that gives new levels of introspection into your transactions."]},{"l":"Installation","p":["Install pre-built binaries:","Install from source:"]},{"l":"Start a Surfnet"},{"l":"Resources","p":["Access tutorials and documentation at docs.surfpool.run to understand Surfnets and the Runbook syntax, and to discover the powerful features of surfpool.","Additionally, the Visual Studio Code extension will make writing runbooks easier.","Our Surfpool 101 Series is also a great place to start learning about Surfpool and its features:"]},{"l":"Quickstart"},{"l":"List runbooks available in this repository"},{"l":"Start a Surfnet, automatically executing the deployment runbook on program recompile:"},{"l":"Execute an existing runbook"}]]